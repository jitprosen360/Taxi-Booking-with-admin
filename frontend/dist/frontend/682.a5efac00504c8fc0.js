"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[682],{682:(F,l,a)=>{a.r(l),a.d(l,{CountryModule:()=>A});var s=a(6814),c=a(6223),t=a(5879),m=a(9862),h=a(4506);let p=(()=>{var o;class i{constructor(n){this.http=n,this.serverUrl=h.N.apiUrl,this.countryAPI="https://restcountries.com/v3.1/all"}fetchCountryAPI(){return this.http.get(`${this.countryAPI}`)}addCountry(n){return this.http.post(`${this.serverUrl}/countryadd`,n)}getcountryData(){return this.http.get(`${this.serverUrl}/countrydata`)}searchCountry(n){return this.http.get(`${this.serverUrl}/searchcountry/`,{params:{search:n}})}}return(o=i).\u0275fac=function(n){return new(n||o)(t.LFG(m.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var g=a(9229),f=a(7682),y=a(617);function C(o,i){if(1&o&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.name.common)}}function x(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"h2",10),t._uU(2,"COUNTRY"),t.qZA(),t.TgZ(3,"form",11),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.OnSubmit())}),t.TgZ(4,"div",12)(5,"select",13,14),t.NdJ("change",function(){t.CHM(e);const r=t.MAs(6),u=t.oxw();return t.KtG(u.onSelected(r.value))}),t.TgZ(7,"option",15),t._uU(8,"Select Country"),t.qZA(),t.YNc(9,C,2,1,"option",16),t.qZA()(),t.TgZ(10,"div",10)(11,"label",17),t._uU(12,"Country"),t.qZA(),t._UZ(13,"input",18),t.qZA(),t.TgZ(14,"div",10)(15,"label",17),t._uU(16,"TimeZone"),t.qZA(),t._UZ(17,"input",19),t.qZA(),t.TgZ(18,"div",10)(19,"label",17),t._uU(20,"Code"),t.qZA(),t._UZ(21,"input",20),t.qZA(),t.TgZ(22,"div",10)(23,"label",17),t._uU(24,"Currency"),t.qZA(),t._UZ(25,"input",21),t.qZA(),t.TgZ(26,"div",10)(27,"label",17),t._uU(28,"Flag"),t.qZA(),t._UZ(29,"img",22),t.qZA(),t.TgZ(30,"div")(31,"button",23),t._uU(32," Add-country"),t.qZA(),t.TgZ(33,"button",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(34," Cancel"),t.qZA()()()()}if(2&o){const e=t.oxw();let n;t.xp6(3),t.Q6J("formGroup",e.countryForm),t.xp6(6),t.Q6J("ngForOf",e.countryData),t.xp6(4),t.Q6J("readonly",e.AddbuttonForm)("value","countryname"),t.xp6(4),t.Q6J("readonly",e.AddbuttonForm)("value","countrytimezone"),t.xp6(4),t.Q6J("readonly",e.AddbuttonForm)("value","countrycode"),t.xp6(4),t.Q6J("readonly",e.AddbuttonForm)("value",null==(n=e.countryForm.get("countrycurrency"))?null:n.value),t.xp6(4),t.s9C("src",e.flag,t.LSH)}}function b(o,i){if(1&o&&(t.TgZ(0,"div",26),t._UZ(1,"img",27),t.TgZ(2,"div",28)(3,"h5",29),t._uU(4),t.qZA(),t.TgZ(5,"h5",29),t._uU(6),t.qZA(),t.TgZ(7,"h5",29),t._uU(8),t.qZA(),t.TgZ(9,"h5",29),t._uU(10),t.qZA()()()),2&o){const e=i.$implicit;t.xp6(1),t.s9C("src",e.flagImage,t.LSH),t.xp6(3),t.hij("Country Name: ",e.countryName,""),t.xp6(2),t.hij("Timezone: ",e.countryTimeZone,""),t.xp6(2),t.hij("Country Code: ",e.countryCode,""),t.xp6(2),t.hij("Country Currency: ",e.countryCurrency,"")}}let v=(()=>{var o;class i{constructor(n,r,u,d,T){this.http=n,this._country=r,this.formbuilder=u,this.toastr=d,this.authService=T,this.AddbuttonForm=!1,this.addcountrydata={countryname:"",countrycurrency:"",countrytimezone:"",countrycode:"",flag:""},this.countryDataDB=[],this.search=""}ngOnInit(){this.fetchCountryDataAPI(),this.getDatafromDB(),this.countrySearch(),this.countryForm=this.formbuilder.group({countryname:["",c.kI.required],countrytimezone:["",c.kI.required],countrycode:["",c.kI.required],countrycurrency:["",c.kI.required],flag:["",c.kI.required]})}getDatafromDB(){this._country.getcountryData().subscribe({next:n=>{this.countryDataDB=n.countrydata},error:n=>{alert(n)}})}fetchCountryDataAPI(){this._country.fetchCountryAPI().subscribe({next:n=>{this.countryData=n},error:n=>{console.log(n)}})}onSelected(n){const r=this.countryData.find(u=>u.name.common===n);this.currenciesObj=r.currencies,this.currencyKeys=Object.keys(this.currenciesObj),this.firstCurrencyKey=this.currencyKeys[0],this.currencysymbol=this.currenciesObj[this.firstCurrencyKey],this.symbol=this.currencysymbol.symbol,this.flag=r.flags.png,r&&this.countryForm.patchValue({countryname:r.name.common,countrytimezone:r.timezones,countrycode:r.idd.root+r.idd.suffixes[0],countrycurrency:this.symbol,flag:r.flags.png})}OnSubmit(){if(this.countryForm.valid){const n=this.countryForm.value;this.addcountrydata={countryName:n.countryname,countryCurrency:n.countrycurrency,countryTimeZone:n.countrytimezone[0],countryCode:n.countrycode,flagImage:n.flag},this._country.addCountry(this.addcountrydata).subscribe({next:r=>{this.countryDataDB.push(r.countrydata),this.getDatafromDB(),this.countryForm.reset(),this.AddbuttonForm=!1,this.toastr.success(r.message)},error:r=>{console.log(r),this.toastr.warning(r.error.message)}})}}countrySearch(){this._country.searchCountry(this.search).subscribe({next:n=>{this.countryDataDB=n.countrydata},error:n=>{console.log(n)}})}toggleFormVisibility(){this.AddbuttonForm=!this.AddbuttonForm}cancel(){this.AddbuttonForm=!1,this.countryForm.reset()}resetTimer(){this.authService.resetInactivityTimer()}}return(o=i).\u0275fac=function(n){return new(n||o)(t.Y36(m.eN),t.Y36(p),t.Y36(c.qu),t.Y36(g._W),t.Y36(f.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-country"]],decls:13,vars:3,consts:[[1,"d-flex","justify-content-center"],["mat-button","","mat-stroked-button","","color","primary","id","showbtn",1,"m-4","d-flex","align-items-center","justify-content-center",3,"click"],["type","text","id","search","placeholder","Search by Country Name...",1,"form-control","m-4","w-25",3,"ngModel","ngModelChange"],["id","searchbtn",3,"click"],[1,"parentFormContainer"],["id","formContainer",4,"ngIf"],[1,"card-container","container"],["id","card-box",1,"container","d-flex","flex-wrap","align-items-center"],["class","m-4 card",4,"ngFor","ngForOf"],["id","formContainer"],[1,"mb-3"],[1,"container",3,"formGroup","ngSubmit"],[1,"dropdown"],["name","country",3,"change"],["country",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-label","d-flex","justify-content-start"],["type","text","formControlName","countryname","name","countryname",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrytimezone",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrycode",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrycurrency",1,"form-control",3,"readonly","value"],[2,"width","100px",3,"src"],["type","submit","id","submitBtn",1,"btn","btn-primary","w-40"],[1,"btn","btn-primary","w-40",2,"margin-left","20px",3,"click"],[3,"value"],[1,"m-4","card"],["alt","Card image cap",1,"card-img-top",2,"width","200px","height","300px",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return r.toggleFormVisibility()}),t.TgZ(2,"mat-icon"),t._uU(3,"add_circle"),t.qZA(),t._uU(4," Add Country "),t.qZA(),t.TgZ(5,"input",2),t.NdJ("ngModelChange",function(d){return r.search=d}),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return r.countrySearch()}),t._uU(7,"Search"),t.qZA()(),t.TgZ(8,"div",4),t.YNc(9,x,35,11,"div",5),t.qZA(),t.TgZ(10,"div",6)(11,"div",7),t.YNc(12,b,11,5,"div",8),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("ngModel",r.search),t.xp6(4),t.Q6J("ngIf",r.AddbuttonForm),t.xp6(3),t.Q6J("ngForOf",r.countryDataDB))},dependencies:[s.sg,s.O5,c._Y,c.YN,c.Kr,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,y.Hw],styles:["h1[_ngcontent-%COMP%]{font-family:cursive;padding:40px;color:#fff}.parentFormContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}#formContainer[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:4px 4px 16px #000;width:90%;max-width:600px;padding:20px;margin:40px}#search-input[_ngcontent-%COMP%]{flex-grow:1;padding:5px}#showbtn[_ngcontent-%COMP%]{border-radius:5px;box-shadow:2px 2px 2px #4371e4;border:1px solid black}#searchbtn[_ngcontent-%COMP%]{padding:6px;background-color:#7200c4;color:#fff;border:none;cursor:pointer;border-radius:3px}#showbtn[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all linear .2s;z-index:1;box-shadow:2px 2px 20px #0000004d;cursor:pointer}.dropdown[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.dropdown[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:5px}@media screen and (max-width: 480px){#formContainer[_ngcontent-%COMP%]{width:90%;margin:20px}}@media screen and (max-width: 780px){#formContainer[_ngcontent-%COMP%]{width:80%;margin:20px}}.card-container[_ngcontent-%COMP%]{width:100%;margin-top:5%}#card-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #cccccc;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:200px;height:270px;transition:all linear .2s;margin:10px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all linear .2s;z-index:1;box-shadow:2px 2px 20px #0000004d;cursor:pointer}@media screen and (max-width: 580px){.card[_ngcontent-%COMP%]{width:90%;height:auto}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%;min-height:100%}}"]}),i})();var _=a(1896);const Z=[{path:"",component:v,pathMatch:"full"}];let A=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.ez,_.Bz.forChild(Z),c.u5,c.UX,y.Ps]}),i})()}}]);