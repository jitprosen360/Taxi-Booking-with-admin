"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{6993:(b,m,o)=>{o.d(m,{Z:()=>u});var _=o(4506),p=o(5879),f=o(9862);let u=(()=>{var i;class g{constructor(r){this.http=r,this.serverUrl=_.N.apiUrl}getcountryData(){return this.http.get(`${this.serverUrl}/countrydata`)}addcity(r){return this.http.post(`${this.serverUrl}/cityadd`,r)}getcity(r,l){return this.http.get(`${this.serverUrl}/citydata`,{params:{page:r,limit:l}})}updateCity(r,l){return console.log(r),console.log(l),this.http.put(`${this.serverUrl}/cityupdate/${r}`,l)}getCityPolygons(r){return console.log(r),this.http.get(`${this.serverUrl}/coordinates/${r}`)}}return(i=g).\u0275fac=function(r){return new(r||i)(p.LFG(f.eN))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),g})()},658:(b,m,o)=>{o.d(m,{K:()=>u});var _=o(4506),p=o(5879),f=o(9862);let u=(()=>{var i;class g{constructor(r){this.http=r,this.serverUrl=_.N.apiUrl}getride(r,l,h,x,S,U){return this.http.post(`${this.serverUrl}/ridesinfo`,{page:r,limit:l,search:h,statusfilter:x,vehiclefilter:S,sortOrder:U})}getMatchedDriverdata(r){return this.http.post(`${this.serverUrl}/assigneddriverdata`,r)}}return(i=g).\u0275fac=function(r){return new(r||i)(p.LFG(f.eN))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),g})()},3679:(b,m,o)=>{o.d(m,{s:()=>f});var _=o(4506),p=o(5879);let f=(()=>{var u;class i{constructor(){this.url=_.N.apiUrl}}return(u=i).\u0275fac=function(v){return new(v||u)},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),i})()},5946:(b,m,o)=>{o.d(m,{R:()=>u});var _=o(4506),p=o(5879),f=o(9862);let u=(()=>{var i;class g{constructor(r){this.http=r,this.serverUrl=_.N.apiUrl}addSetting(r){return console.log(r),this.http.post(`${this.serverUrl}/setting`,r)}get_setting_data(){return this.http.get(`${this.serverUrl}/settingdata`)}updateSetting(r){return this.http.put(`${this.serverUrl}/updatesetting`,r)}}return(i=g).\u0275fac=function(r){return new(r||i)(p.LFG(f.eN))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),g})()},1937:(b,m,o)=>{o.d(m,{f:()=>u});var _=o(4506),p=o(5879),f=o(9862);let u=(()=>{var i;class g{constructor(r){this.http=r,this.serverUrl=_.N.apiUrl}registerVehicle(r){return this.http.post(`${this.serverUrl}/vehicleadd`,r)}getvehicleData(){return this.http.get(`${this.serverUrl}/vehicledata`)}updateVehicle(r,l){return console.log(r),this.http.put(`${this.serverUrl}/updateVehicle/${r}`,l)}}return(i=g).\u0275fac=function(r){return new(r||i)(p.LFG(f.eN))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),g})()},425:(b,m,o)=>{o.d(m,{g:()=>$});var _=o(5861),p=o(7700),f="https://js.stripe.com/v3",u=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=null,S=Promise.resolve().then(function(){return s=null,null!==l||(l=new Promise(function(a,e){if(typeof window>"u"||typeof document>"u")a(null);else if(window.Stripe&&s&&console.warn(i),window.Stripe)a(window.Stripe);else try{var n=function(){for(var s=document.querySelectorAll('script[src^="'.concat(f,'"]')),a=0;a<s.length;a++){var e=s[a];if(u.test(e.src))return e}return null}();n&&s?console.warn(i):n||(n=function(s){var a=s&&!s.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(f).concat(a);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(e),e}(s)),n.addEventListener("load",function(){window.Stripe?a(window.Stripe):e(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){e(new Error("Failed to load Stripe.js"))})}catch(d){return void e(d)}})),l;var s}),U=!1;S.catch(function(c){U||console.warn(c)});var E=o(4506),t=o(5879),P=o(9862),w=o(9229);let T=(()=>{var c;class s{constructor(e){this.http=e,this.url=E.N.apiUrl}getcard(e){return this.http.get(`${this.url}/getcard/`+e)}deletecard(e){return this.http.delete(`${this.url}/deletecard/`+e)}}return(c=s).\u0275fac=function(e){return new(e||c)(t.LFG(P.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),s})();var y=o(6814),Z=o(2296);function A(c,s){1&c&&(t.TgZ(0,"span",23),t._uU(1,"Default"),t.qZA())}function D(c,s){if(1&c){const a=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(a);const n=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.setdefaultCard(n.customer,n.id))}),t._uU(1,"Set Default"),t.qZA()}}function k(c,s){if(1&c){const a=t.EpF();t.TgZ(0,"div",17)(1,"span"),t._uU(2),t.qZA(),t._UZ(3,"img",18),t.TgZ(4,"div",19),t._uU(5),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"button",20),t.NdJ("click",function(){const d=t.CHM(a).$implicit,C=t.oxw(2);return t.KtG(C.deleteCard(d.id))}),t._uU(10,"Delete"),t.qZA()(),t.YNc(11,A,2,0,"span",21),t.YNc(12,D,2,0,"button",22),t.qZA()}if(2&c){const a=s.$implicit,e=s.index;t.xp6(2),t.hij("",e+1,"."),t.xp6(3),t.hij("**** **** **** ",a.card.last4,""),t.xp6(2),t.AsE("",a.card.exp_month," / ",a.card.exp_year,""),t.xp6(4),t.Q6J("ngIf",1==a.isdefalut),t.xp6(1),t.Q6J("ngIf",0==a.isdefalut)}}function R(c,s){if(1&c&&(t.TgZ(0,"div",15),t.YNc(1,k,13,6,"div",16),t.qZA()),2&c){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.carddata)}}let $=(()=>{var c;class s{constructor(e,n,d,C,M){this.dialogRef=e,this.data=n,this.http=d,this.toster=C,this._stripeService=M,this.apiUrl=E.N.apiUrl,this.cardlist=!0,this.carddata=[]}ngOnInit(){var e=this;return(0,_.Z)(function*(){e.userdata=e.data.userdata,e.userid=e.userdata._id,e.stripe=yield function(){for(var s=arguments.length,a=new Array(s),e=0;e<s;e++)a[e]=arguments[e];U=!0;var n=Date.now();return S.then(function(d){return function(s,a,e){if(null===s)return null;var n=s.apply(void 0,a);return function(s,a){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:a})}(n,e),n}(d,a,n)})}("pk_test_51NZeiUANXK9scyulUjawM5Gzvx6F6MOm8nzHj96fghdbp1d6bOwX6ttQBrtNXXHAi5S5ga7RH7MHyRwpqUXFSJ6Q00kvn8Jkgu"),e.elements=e.stripe.elements(),e.cardElement=e.elements.create("card"),e.cardElement.mount("#card-element"),e.getCard(e.userid)})()}addCard(e){var n=this;return(0,_.Z)(function*(){const d=yield n.stripe.createToken(n.cardElement),C=yield d.token;console.log("succes: ",yield d.token),console.log("Token:",C),yield fetch(`${n.apiUrl}/addcard/${e}`,{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({token:C})}),n.getCard(n.userid)})()}getCard(e){this._stripeService.getcard(e).subscribe({next:d=>{this.carddata=d.paymentMethodsData,console.log(this.carddata)},error:d=>{console.log(d)}})}deleteCard(e){console.log(e),this._stripeService.deletecard(e).subscribe({next:n=>{this.toster.success(n.message),this.getCard(this.userid)},error:n=>{console.log(n)}})}setdefaultCard(e,n){var d=this;return(0,_.Z)(function*(){console.log(e),console.log(n),d.http.patch(`${d.apiUrl}/setdefaultcard/${e}`,{cardId:n}).subscribe(C=>{console.log(C),d.isDefault=n,d.getCard(d.userid)},C=>{console.error("Error:",C)})})()}closeDialog(){this.dialogRef.close()}}return(c=s).\u0275fac=function(e){return new(e||c)(t.Y36(p.so),t.Y36(p.WI),t.Y36(P.eN),t.Y36(w._W),t.Y36(T))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-stripe"]],decls:25,vars:1,consts:[[1,"container"],[1,"circles"],[1,"circle","circle-1"],[1,"circle","circle-2"],[1,"cardtemplate"],[1,"visa_logo"],["src","https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/visa.png","alt",""],[1,"visa_info"],["src","https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png","alt",""],[1,"visa_crinfo"],["id","card-element",1,"stripecard"],["class","m-2",4,"ngIf"],["align","end"],["id","submit","mat-raised-button","",1,"addcardbtn",3,"click"],["mat-raised-button","",1,"cancelbtn","mx-4",3,"click"],[1,"m-2"],["class","d-flex align-items-center text-center border p-2 rounded mb-2",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","text-center","border","p-2","rounded","mb-2"],["src","../../../assets/images/visa-card-logo-9.png",1,"ms-3",2,"height","15px"],[1,"ms-5"],[1,"deletecard","ms-5",3,"click"],["class","defaultcard",4,"ngIf"],["class","setdefaultcard",3,"click",4,"ngIf"],[1,"defaultcard"],[1,"setdefaultcard",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"div",1),t._UZ(3,"div",2)(4,"div",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"img",6),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"img",8),t.TgZ(10,"p"),t._uU(11,"4586 7985 9271 6388"),t.qZA()(),t.TgZ(12,"div",9)(13,"p"),t._uU(14,"07/23"),t.qZA(),t.TgZ(15,"p"),t._uU(16,"Prashant Rai"),t.qZA()()()(),t._UZ(17,"div",10),t.TgZ(18,"div"),t.YNc(19,R,2,1,"div",11),t.qZA()(),t.TgZ(20,"mat-dialog-actions",12)(21,"button",13),t.NdJ("click",function(){return n.addCard(n.userid)}),t._uU(22,"Add Card"),t.qZA(),t.TgZ(23,"button",14),t.NdJ("click",function(){return n.closeDialog()}),t._uU(24,"Cancel"),t.qZA()()),2&e&&(t.xp6(19),t.Q6J("ngIf",n.carddata))},dependencies:[y.sg,y.O5,p.xY,p.H8,Z.lW],styles:['@import"https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;font-family:Rubik,sans-serif}.container[_ngcontent-%COMP%]{width:100%;height:40vh;display:flex;justify-content:center;align-items:center;background-image:linear-gradient(109.6deg,rgba(62,161,219,1) 11.2%,rgba(93,52,236,1) 100.2%)}.circles[_ngcontent-%COMP%]{position:absolute;height:270px;width:450px;top:50%;left:50%;transform:translate(-50%,-50%)}.circle-1[_ngcontent-%COMP%]{position:absolute;top:-50px;border-radius:50%;background:radial-gradient(#006db3,#29b6f6);left:10px;height:160px;width:160px}.cardtemplate[_ngcontent-%COMP%]{width:380px;height:230px;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.4);border-radius:10px;z-index:1;overflow:hidden;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);position:relative}.visa_logo[_ngcontent-%COMP%]{float:right;padding:10px}.visa_logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:40px}.visa_info[_ngcontent-%COMP%]{padding:10px;margin:30px 0}.visa_info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:45px}.visa_info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;padding:10px 0;letter-spacing:2px;color:#fff}.visa_crinfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 10px;color:#fff}.stripecard[_ngcontent-%COMP%]{margin:20px 0;font-size:24px;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.4);border-radius:10px;z-index:1;overflow:hidden;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);position:relative}.defaultcard[_ngcontent-%COMP%]{margin-left:20px;background-color:#00db00;color:#fff;font-size:10px;padding:0 10px;border-radius:20px;font-weight:600}.setdefaultcard[_ngcontent-%COMP%]{margin-left:20px;background-color:#006f9b;color:#fff;font-size:10px;padding:0 5px;border-radius:20px;font-weight:600;border:none}.deletecard[_ngcontent-%COMP%]{background-color:#ffadad;color:#df0000;font-size:10px;padding:0 3px;border-radius:3px;font-weight:600;border:none;cursor:pointer}.addcardbtn[_ngcontent-%COMP%]{background-color:#5d34ec;color:#fff;padding:0 10px;font-weight:900}.cancelbtn[_ngcontent-%COMP%]{font-weight:900}']}),s})()},5861:(b,m,o)=>{function _(f,u,i,g,v,r,l){try{var h=f[r](l),x=h.value}catch(S){return void i(S)}h.done?u(x):Promise.resolve(x).then(g,v)}function p(f){return function(){var u=this,i=arguments;return new Promise(function(g,v){var r=f.apply(u,i);function l(x){_(r,g,v,l,h,"next",x)}function h(x){_(r,g,v,l,h,"throw",x)}l(void 0)})}}o.d(m,{Z:()=>p})}}]);