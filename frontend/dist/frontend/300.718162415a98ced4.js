"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[300],{2300:(re,m,d)=>{d.r(m),d.d(m,{ConfirmrideModule:()=>ie});var g=d(6814),c=d(7700),Z=d(4506),e=d(5879),u=d(2296);function C(i,r){if(1&i&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.Oqu(s.data.wayPoints)}}function q(i,r){1&i&&(e.TgZ(0,"span",4),e._uU(1,"No way point"),e.qZA())}let x=(()=>{var i;class r{constructor(n,t,a){this.dialog=n,this.dialogRef=t,this.data=a,this.apiUrl=Z.N.apiUrl,this.dataArray=[]}ngOnInit(){this.dataArray=this.data}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(c.uw),e.Y36(c.so),e.Y36(c.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-info-dialog"]],decls:83,vars:16,consts:[[1,"info-component"],[1,"ride-details-dialog"],[1,"ride-details","row","align-items-center"],[1,"details-key","col-sm-3","text-end"],[1,"details-value","col-sm-3","text-start"],["id","userimage"],["alt","user-profile",1,"details-key","col-sm-3","fit-image",3,"src"],["class","details-value col-sm-3 text-start",4,"ngIf","ngIfElse"],["noWayPoints",""],["id","serviceimage"],["alt","service-photo",1,"details-key","col-sm-3",3,"src"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"info-button"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Ride Details"),e.qZA(),e.TgZ(4,"div",2)(5,"span",3),e._uU(6,"Request ID :"),e.qZA(),e.TgZ(7,"span",4),e._uU(8),e.qZA()(),e.TgZ(9,"div",2)(10,"span",3),e._uU(11,"User ID :"),e.qZA(),e.TgZ(12,"span",4),e._uU(13),e.qZA()(),e.TgZ(14,"div",2)(15,"span",3),e._uU(16,"User Name :"),e.qZA(),e.TgZ(17,"span",4),e._uU(18),e.qZA()(),e.TgZ(19,"div",2)(20,"span",3),e._uU(21,"User Profile :"),e.qZA(),e.TgZ(22,"div",5),e._UZ(23,"img",6),e.qZA()(),e.TgZ(24,"div",2)(25,"span",3),e._uU(26,"User Email :"),e.qZA(),e.TgZ(27,"span",4),e._uU(28),e.qZA()(),e.TgZ(29,"div",2)(30,"span",3),e._uU(31,"User Phone :"),e.qZA(),e.TgZ(32,"span",4),e._uU(33),e.qZA()(),e.TgZ(34,"div",2)(35,"span",3),e._uU(36,"Pickup Location:"),e.qZA(),e.TgZ(37,"span",4),e._uU(38),e.qZA()(),e.TgZ(39,"div",2)(40,"span",3),e._uU(41,"Drop-off Location:"),e.qZA(),e.TgZ(42,"span",4),e._uU(43),e.qZA()(),e.TgZ(44,"div",2)(45,"span",3),e._uU(46,"Way Point :"),e.qZA(),e.YNc(47,C,2,1,"span",7),e.YNc(48,q,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(50,"div",2)(51,"span",3),e._uU(52,"Service Type :"),e.qZA(),e.TgZ(53,"span",4),e._uU(54),e.qZA()(),e.TgZ(55,"div",2)(56,"span",3),e._uU(57,"Service Image :"),e.qZA(),e.TgZ(58,"div",9),e._UZ(59,"img",10),e.qZA()(),e.TgZ(60,"div",2)(61,"span",3),e._uU(62,"Total Distance :"),e.qZA(),e.TgZ(63,"span",4),e._uU(64),e.qZA()(),e.TgZ(65,"div",2)(66,"span",3),e._uU(67,"Estimatetd Time :"),e.qZA(),e.TgZ(68,"span",4),e._uU(69),e.qZA()(),e.TgZ(70,"div",2)(71,"span",3),e._uU(72,"Estimated Fare :"),e.qZA(),e.TgZ(73,"span",4),e._uU(74),e.qZA()(),e.TgZ(75,"div",2)(76,"span",3),e._uU(77,"Booking Time :"),e.qZA(),e.TgZ(78,"span",4),e._uU(79),e.qZA()()(),e.TgZ(80,"div",11)(81,"button",12),e._uU(82,"Ok"),e.qZA()()()),2&n){const a=e.MAs(49);e.xp6(8),e.Oqu(t.data._id),e.xp6(5),e.Oqu(t.data.userId),e.xp6(5),e.Oqu(t.data.userDetails.username),e.xp6(5),e.Q6J("src",t.apiUrl+"/"+t.data.userDetails.profile,e.LSH),e.xp6(5),e.Oqu(t.data.userDetails.useremail),e.xp6(5),e.Oqu(t.data.userDetails.countrycode+" "+t.data.userDetails.userphone),e.xp6(5),e.Oqu(t.data.startLocation),e.xp6(5),e.Oqu(t.data.endLocation),e.xp6(4),e.Q6J("ngIf",t.data.wayPoints&&t.data.wayPoints.length>0)("ngIfElse",a),e.xp6(7),e.Oqu(t.data.serviceType),e.xp6(5),e.Q6J("src",t.apiUrl+"/"+t.data.vehicleDetails.vehicleImage,e.LSH),e.xp6(5),e.Oqu(t.data.totalDistance),e.xp6(5),e.Oqu(t.data.estimateTime),e.xp6(5),e.hij("\u20b9 ",t.data.estimateFare,""),e.xp6(5),e.Oqu(t.data.updatedAt)}},dependencies:[g.O5,u.lW,c.ZT,c.H8],styles:[".info-component[_ngcontent-%COMP%]{overflow:hidden}.ride-details-dialog[_ngcontent-%COMP%]{text-align:center}.ride-details[_ngcontent-%COMP%]{margin-bottom:10px}.details-key[_ngcontent-%COMP%]{font-weight:700;white-space:nowrap}.details-value[_ngcontent-%COMP%]{white-space:nowrap}.info-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;border:none;border-radius:4px;background-color:#830fff;color:#fff;cursor:pointer}.fit-image[_ngcontent-%COMP%]{max-width:100px;max-height:100px;border-radius:50%}@media (max-width: 767px){.ride-details-dialog[_ngcontent-%COMP%]{padding:20px}}"]}),r})();var v=d(5596),T=d(3679);function U(i,r){1&i&&(e.TgZ(0,"td"),e._uU(1,"No Service"),e.qZA())}function b(i,r){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.serviceDetails.vehicleName)}}function D(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",18),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,U,2,0,"td",19),e.YNc(12,b,2,1,"td",19),e.TgZ(13,"td")(14,"button",20),e.NdJ("click",function(){const a=e.CHM(s).$implicit,o=e.oxw();return e.KtG(o.assignDriver(a))}),e._uU(15,"Assign Driver"),e.qZA()()()}if(2&i){const s=r.$implicit,n=e.oxw();e.xp6(2),e.Q6J("src",n.apiUrl+"/"+s.profile,e.LSH),e.xp6(2),e.Oqu(s.drivername),e.xp6(2),e.Oqu(s.driveremail),e.xp6(2),e.Oqu(s.countrycode+" "+s.driverphone),e.xp6(2),e.Oqu(s.cityDetails.city),e.xp6(1),e.Q6J("ngIf",null==s.servicetype),e.xp6(1),e.Q6J("ngIf",null!=s.servicetype)}}function y(i,r){if(1&i&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.hij(": ",s.data.wayPoints,"")}}function O(i,r){1&i&&(e.TgZ(0,"span",12),e._uU(1,": No way point"),e.qZA())}let P=(()=>{var i;class r{constructor(n,t,a,o,h){this.dialog=n,this.dialogRef=t,this.data=a,this._socketService=o,this._runningRequestService=h,this.apiUrl=Z.N.apiUrl,this.dataArray=[],this.driverArray=[]}ngOnInit(){this.getDriverData(),this.assigndriverdata(),this.gettingrejectrunningrequestdata(),this.listenassignrejected(),this.dataArray=this.data}getDriverData(){this.cityId=this.data.cityId,this.serviceId=this.data.serviceId,this._socketService.getAssignedDriverData(this.cityId,this.serviceId),this._socketService.onUpdateStatusData().subscribe({next:n=>{console.log(n),this._socketService.getAssignedDriverData(this.cityId,this.serviceId),this._socketService.onAssignedDriverData().subscribe(t=>{console.log(t),t?(this.driverArray=t,console.log(this.driverArray)):console.log("Error retrieving assigned driver data:",t)})}}),this._socketService.onAssignedDriverData().subscribe(n=>{n?(this.driverArray=n,this.driver=n):console.log("Error retrieving assigned driver data:",n)}),this._socketService.onUpdateServiceData().subscribe({next:n=>{this._socketService.getAssignedDriverData(this.cityId,this.serviceId),n?this.driverArray=n:console.log("Error retrieving assigned driver data:",n)}})}assigndriverdata(){this._socketService.onFinalassignedDriverData("data").subscribe({next:n=>{this._socketService.getAssignedDriverData(this.cityId,this.serviceId),this._socketService.onAssignedDriverData().subscribe(t=>{this.driverArray=t})}})}assignDriver(n){this.dialogRef.close({ridedata:this.data,driverdata:n})}NearestDriver(n){this.data.nearest=!0,console.log(this.data.nearest),console.log(this.data);const t={ridedata:this.data,driverdata:n};console.log(t),this.dialogRef.close(t)}listenassignrejected(){this._socketService.listenassignrejected().subscribe(n=>{this.getDriverData()})}gettingrejectrunningrequestdata(){this._socketService.listenrejectRunningRequest().subscribe(n=>{this.getDriverData()})}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(c.uw),e.Y36(c.so),e.Y36(c.WI),e.Y36(v.$),e.Y36(T.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-assign-driver"]],decls:98,vars:15,consts:[[1,"container","p-4"],[1,"parentFormContainer"],["id","tableContainer"],[1,"table-responsive"],[1,"table"],[1,"bg-light","text-dark"],[4,"ngFor","ngForOf"],[1,"info-component"],[1,"ride-details-dialog"],[1,"text-start"],[1,"ride-details","row","align-items-center"],[1,"details-key","col-sm-3","text-start"],[1,"details-value","col-sm-3","text-start"],["class","details-value col-sm-3 text-start",4,"ngIf","ngIfElse"],["noWayPoints",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"info-button"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"info-button","nearest-driver-button",3,"click"],["alt","driver-profile",3,"src"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr")(7,"th"),e._uU(8,"Profile"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Name"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Email"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Phone"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"City"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Service"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Action"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,D,16,7,"tr",6),e.qZA()()(),e.TgZ(23,"div",7)(24,"div",8)(25,"h2",9),e._uU(26,"Ride Details"),e.qZA(),e.TgZ(27,"div",10)(28,"span",11),e._uU(29,"Request ID"),e.qZA(),e.TgZ(30,"span",12),e._uU(31),e.qZA()(),e.TgZ(32,"div",10)(33,"span",11),e._uU(34,"User ID "),e.qZA(),e.TgZ(35,"span",12),e._uU(36),e.qZA()(),e.TgZ(37,"div",10)(38,"span",11),e._uU(39,"User Name "),e.qZA(),e.TgZ(40,"span",12),e._uU(41),e.qZA()(),e.TgZ(42,"div",10)(43,"span",11),e._uU(44,"User Email "),e.qZA(),e.TgZ(45,"span",12),e._uU(46),e.qZA()(),e.TgZ(47,"div",10)(48,"span",11),e._uU(49,"User Phone "),e.qZA(),e.TgZ(50,"span",12),e._uU(51),e.qZA()(),e.TgZ(52,"div",10)(53,"span",11),e._uU(54,"Pickup Location"),e.qZA(),e.TgZ(55,"span",12),e._uU(56),e.qZA()(),e.TgZ(57,"div",10)(58,"span",11),e._uU(59,"Drop-off Location"),e.qZA(),e.TgZ(60,"span",12),e._uU(61),e.qZA()(),e.TgZ(62,"div",10)(63,"span",11),e._uU(64,"Way Point "),e.qZA(),e.YNc(65,y,2,1,"span",13),e.YNc(66,O,2,0,"ng-template",null,14,e.W1O),e.qZA(),e.TgZ(68,"div",10)(69,"span",11),e._uU(70,"Service Type "),e.qZA(),e.TgZ(71,"span",12),e._uU(72),e.qZA()(),e.TgZ(73,"div",10)(74,"span",11),e._uU(75,"Total Distance "),e.qZA(),e.TgZ(76,"span",12),e._uU(77),e.qZA()(),e.TgZ(78,"div",10)(79,"span",11),e._uU(80,"Estimatetd Time "),e.qZA(),e.TgZ(81,"span",12),e._uU(82),e.qZA()(),e.TgZ(83,"div",10)(84,"span",11),e._uU(85,"Estimated Fare "),e.qZA(),e.TgZ(86,"span",12),e._uU(87),e.qZA()(),e.TgZ(88,"div",10)(89,"span",11),e._uU(90,"Booking Time "),e.qZA(),e.TgZ(91,"span",12),e._uU(92),e.qZA()()(),e.TgZ(93,"div",15)(94,"button",16),e._uU(95,"Cancel"),e.qZA(),e.TgZ(96,"button",17),e.NdJ("click",function(){return t.NearestDriver(t.driver)}),e._uU(97,"Nearest Driver"),e.qZA()()()()()()),2&n){const a=e.MAs(67);e.xp6(22),e.Q6J("ngForOf",t.driverArray),e.xp6(9),e.hij(": ",t.data._id,""),e.xp6(5),e.hij(": ",t.data.userId,""),e.xp6(5),e.hij(": ",t.data.userDetails.username,""),e.xp6(5),e.hij(": ",t.data.userDetails.useremail,""),e.xp6(5),e.hij(": ",t.data.userDetails.countrycode+" "+t.data.userDetails.userphone,""),e.xp6(5),e.hij(": ",t.data.startLocation,""),e.xp6(5),e.hij(": ",t.data.endLocation,""),e.xp6(4),e.Q6J("ngIf",t.data.wayPoints&&t.data.wayPoints.length>0)("ngIfElse",a),e.xp6(7),e.hij(": ",t.data.serviceType,""),e.xp6(5),e.hij(": ",t.data.totalDistance,""),e.xp6(5),e.hij(": ",t.data.estimateTime,""),e.xp6(5),e.hij(": \u20b9 ",t.data.estimateFare,""),e.xp6(5),e.hij(": ",t.data.updatedAt,"")}},dependencies:[g.sg,g.O5,u.lW,c.ZT,c.H8],styles:["img[_ngcontent-%COMP%]{width:40px}.info-component[_ngcontent-%COMP%]{overflow:hidden}.ride-details-dialog[_ngcontent-%COMP%]{text-align:center}.ride-details[_ngcontent-%COMP%]{margin-bottom:10px}.details-key[_ngcontent-%COMP%]{font-weight:700;white-space:nowrap}.details-value[_ngcontent-%COMP%]{white-space:nowrap}.info-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;font-weight:700;border:none;border-radius:4px;background-color:#ff0f0f;color:#fff;cursor:pointer}.nearest-driver-button[_ngcontent-%COMP%]{background-color:green;color:#fff}@media (max-width: 767px){.ride-details-dialog[_ngcontent-%COMP%]{padding:20px}}"]}),r})();var M=d(7682),k=d(9229),I=d(658),w=d(1937),l=d(6223),f=d(6472),A=d(617),_=d(7988);function J(i,r){if(1&i&&(e.TgZ(0,"option",4),e._uU(1),e.qZA()),2&i){const s=r.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s)}}const S=function(i){return{"badge-info":i}};function N(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Assigning"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,S,1===s.ridestatus))}}const F=function(i){return{"badge-danger":i}};function Q(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Rejected"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,F,2===s.ridestatus))}}const p=function(i){return{"badge-success":i}};function Y(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Accepted"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,p,4===s.ridestatus))}}function j(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Arrived"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,p,5===s.ridestatus))}}function R(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Picked"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,p,9===s.ridestatus))}}function E(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Started"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,p,6===s.ridestatus))}}function $(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Completed"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,p,7===s.ridestatus))}}const K=function(i){return{"badge-light":i}};function V(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Hold"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,K,8===s.ridestatus))}}const L=function(i){return{"badge-warning":i}};function z(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1,"Pending"),e.qZA()),2&i){const s=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,L,0===s.ridestatus))}}function W(i,r){if(1&i&&(e.TgZ(0,"button",39),e._uU(1),e.qZA()),2&i){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.driverDetails.drivername)}}function H(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(s);const t=e.oxw().$implicit,a=e.oxw();return e.KtG(a.openAssignDriverDialog(t))}),e._uU(1,"Assign"),e.qZA()}}function B(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",29),e._uU(10),e.qZA(),e.TgZ(11,"td",29),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",30),e.YNc(16,N,2,3,"span",31),e.YNc(17,Q,2,3,"span",31),e.YNc(18,Y,2,3,"span",31),e.YNc(19,j,2,3,"span",31),e.YNc(20,R,2,3,"span",31),e.YNc(21,E,2,3,"span",31),e.YNc(22,$,2,3,"span",31),e.YNc(23,V,2,3,"span",31),e.YNc(24,z,2,3,"span",32),e.qZA(),e.TgZ(25,"td"),e.YNc(26,W,2,1,"button",33),e.YNc(27,H,2,0,"button",34),e.qZA(),e.TgZ(28,"td")(29,"button",35)(30,"mat-icon"),e._uU(31,"edit"),e.qZA()(),e.TgZ(32,"mat-menu",null,36)(34,"button",37),e.NdJ("click",function(){const a=e.CHM(s).$implicit,o=e.oxw();return e.KtG(o.openInfoDialog(a))}),e.TgZ(35,"mat-icon"),e._uU(36,"info"),e.qZA(),e._uU(37,"Ride Info"),e.qZA(),e.TgZ(38,"button",37),e.NdJ("click",function(){const a=e.CHM(s).$implicit,o=e.oxw();return e.KtG(o.cancelride(a._id))}),e.TgZ(39,"mat-icon"),e._uU(40,"delete"),e.qZA(),e._uU(41,"Cancel Ride"),e.qZA()()()()}if(2&i){const s=r.$implicit,n=e.MAs(33);e.xp6(2),e.Oqu(s._id),e.xp6(2),e.Oqu(s.userId),e.xp6(2),e.Oqu(s.userDetails.username),e.xp6(2),e.Oqu(s.rideDate),e.xp6(2),e.Oqu(s.startLocation),e.xp6(2),e.Oqu(s.endLocation),e.xp6(2),e.Oqu(s.serviceType),e.xp6(1),e.Q6J("ngSwitch",s.ridestatus),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(1),e.Q6J("ngSwitchCase",5),e.xp6(1),e.Q6J("ngSwitchCase",9),e.xp6(1),e.Q6J("ngSwitchCase",6),e.xp6(1),e.Q6J("ngSwitchCase",7),e.xp6(1),e.Q6J("ngSwitchCase",8),e.xp6(3),e.Q6J("ngIf",s.driverId),e.xp6(1),e.Q6J("ngIf",!s.driverId),e.xp6(2),e.Q6J("matMenuTriggerFor",n)}}const G=function(i,r,s){return{itemsPerPage:i,currentPage:r,totalItems:s}};let X=(()=>{var i;class r{constructor(n,t,a,o,h,ne,se){this.authService=n,this.toastr=t,this._confirmride=a,this.dialog=o,this._socket=h,this._vehicleservice=ne,this._running=se,this.ridesArray=[],this.limit=5,this.currentPage=1,this.totalPages=0,this.search="",this.paginatedRideData=[],this.driverArray=[],this.statusfilter=-1,this.vehiclefilter="",this.filteredVehicles=[],this.sortOrder="desc"}ngOnInit(){this.getrideData(),this.getVehicle(),this.gettingstatusafterassigninCFR(),this.gettingstatusafterrejectinCFR(),this.listeningtimeoutstatusinCFR(),this.listeningwhendriverisnearest(),this.listenassignrejected(),this.listennearestassignbuttonclick(),this.ridestatusupates()}getrideData(){this.search=this.searchText||this.searchDate,this._confirmride.getride(this.currentPage,this.limit,this.search,this.statusfilter,this.vehiclefilter,this.sortOrder).subscribe({next:n=>{this.ridesArray=n.rides,this.totalPages=n.totalPages,this.count=n.totalCount},error:n=>{console.log(n)}})}onPageSizeChange(n){this.limit=parseInt(n.target.value),console.log(this.limit),this.currentPage=1,this.updatePaginatedDrivers(),this.getrideData()}onPageChange(n){console.log(n),n>=1&&n<=this.totalPages&&(this.currentPage=n,this.updatePaginatedDrivers(),this.getrideData())}updatePaginatedDrivers(){const n=(this.currentPage-1)*this.limit;this.paginatedRideData=this.ridesArray.slice(n,n+this.limit)}getVehicle(){this._vehicleservice.getvehicleData().subscribe(n=>{this.filteredVehicles=n.data.map(t=>t.vehicleName)})}clearFilter(){this.statusfilter=-1,this.vehiclefilter="",this.sortOrder="asc",this.getrideData()}openInfoDialog(n){const t=new c.vA;t.disableClose=!1,t.autoFocus=!0,t.width="650px",t.data=n,this.dialog.open(x,t)}openAssignDriverDialog(n){const t=new c.vA;t.disableClose=!1,t.autoFocus=!0,t.width="1000px",t.data=n,this.dialog.open(P,t).afterClosed().subscribe(o=>{this.driverdataArray=o,this.driverId=this.driverdataArray.driverdata._id,this.rideId=this.driverdataArray.ridedata._id,this.cityId=this.driverdataArray.ridedata.cityId,this.serviceId=this.driverdataArray.ridedata.serviceId,0==this.driverdataArray.ridedata.nearest?this._socket.emitassignedDriver(this.driverId,this.rideId):(this._socket.emitnearestdriver(this.rideId,this.cityId,this.serviceId),this._socket.listeningmytaskfunc().subscribe(h=>{this.getrideData()}))})}gettingstatusafterassigninCFR(){this._socket.onFinalassignedDriverData("data").subscribe(n=>{this.getrideData()})}listenassignrejected(){this._socket.listenassignrejected().subscribe(n=>{this.getrideData()})}gettingstatusafterrejectinCFR(){this._socket.listenrejectRunningRequest().subscribe(n=>{this.getrideData()})}listeningtimeoutstatusinCFR(){this._socket.listeningtimeoutstatusinCFR().subscribe(n=>{this.getrideData()})}listeningwhendriverisnearest(){this._socket.listeningwhendriverisnearest().subscribe(n=>{this.getrideData()})}listennearestassignbuttonclick(){this._socket.listeningnearestdriver().subscribe(n=>{this.getrideData()})}ridestatusupates(){this._socket.listeningrideupdates().subscribe(n=>{this.getrideData()})}cancelride(n){console.log(n),this._socket.emitcancelride(n),this._socket.listencancelride().subscribe(t=>{console.log(t),this.getrideData()})}resetTimer(){this.authService.resetInactivityTimer()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(M.e),e.Y36(k._W),e.Y36(I.K),e.Y36(c.uw),e.Y36(v.$),e.Y36(w.f),e.Y36(T.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirmride"]],decls:85,vars:20,consts:[[1,"container"],[1,"filter-section"],["id","filter-dropdown",3,"ngModel","ngModelChange"],["value","-1"],[3,"value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","id","search-input","placeholder","Search by Req. ID, Name, Phone, Pick up Date...",3,"ngModel","ngModelChange"],["type","date","id","search-input",3,"ngModel","ngModelChange"],["id","searchbtn",3,"click"],[1,"custom-select"],["id","pageSize",1,"m-2",3,"ngModel","ngModelChange","change"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],["value","desc"],["value","asc"],["id","filterbtn",3,"click"],["id","clearbtn",3,"click"],[1,"parentFormContainer"],["id","tableContainer"],[1,"table-responsive"],[1,"table"],[1,"bg-light","text-dark"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"maxSize","responsive","pageChange"],[1,"fixed-width"],[3,"ngSwitch"],["class","statusbadge",3,"ngClass",4,"ngSwitchCase"],["class","statusbadge",3,"ngClass",4,"ngSwitchDefault"],["class","btn btn-success",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["color","accent","mat-button","",3,"matMenuTriggerFor"],["lvl2master","matMenu"],["mat-menu-item","",3,"click"],[1,"statusbadge",3,"ngClass"],[1,"btn","btn-success"],[1,"btn","btn-primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"select",2),e.NdJ("ngModelChange",function(o){return t.statusfilter=o}),e.TgZ(3,"option",3),e._uU(4,"Select Status"),e.qZA(),e.TgZ(5,"option",4),e._uU(6,"Pending"),e.qZA(),e.TgZ(7,"option",4),e._uU(8,"Assigning"),e.qZA(),e.TgZ(9,"option",4),e._uU(10,"Rejected"),e.qZA()(),e.TgZ(11,"select",2),e.NdJ("ngModelChange",function(o){return t.vehiclefilter=o}),e.TgZ(12,"option",5),e._uU(13,"Select a vehicle"),e.qZA(),e.YNc(14,J,2,2,"option",6),e.qZA(),e.TgZ(15,"input",7),e.NdJ("ngModelChange",function(o){return t.searchText=o}),e.qZA(),e.TgZ(16,"input",8),e.NdJ("ngModelChange",function(o){return t.searchDate=o}),e.qZA(),e.TgZ(17,"button",9),e.NdJ("click",function(){return t.getrideData()}),e._uU(18,"Search"),e.qZA(),e.TgZ(19,"div",10)(20,"select",11),e.NdJ("ngModelChange",function(o){return t.limit=o})("change",function(o){return t.onPageSizeChange(o)}),e.TgZ(21,"option",12),e._uU(22,"Select Page"),e.qZA(),e.TgZ(23,"option",12),e._uU(24,"5"),e.qZA(),e.TgZ(25,"option",13),e._uU(26,"10"),e.qZA(),e.TgZ(27,"option",14),e._uU(28,"20"),e.qZA(),e.TgZ(29,"option",15),e._uU(30,"50"),e.qZA(),e.TgZ(31,"option",16),e._uU(32,"100"),e.qZA()()(),e.TgZ(33,"select",2),e.NdJ("ngModelChange",function(o){return t.sortOrder=o}),e.TgZ(34,"option",17),e._uU(35,"Sorting Order"),e.qZA(),e.TgZ(36,"option",18),e._uU(37,"Ascending"),e.qZA(),e.TgZ(38,"option",17),e._uU(39,"Descending"),e.qZA()(),e.TgZ(40,"button",19),e.NdJ("click",function(){return t.getrideData()}),e._uU(41,"Apply Filter"),e.qZA(),e.TgZ(42,"button",20),e.NdJ("click",function(){return t.clearFilter()}),e._uU(43,"Clear Filter"),e.qZA()()(),e.TgZ(44,"div",21)(45,"div",22)(46,"div",23)(47,"table",24)(48,"thead",25)(49,"tr")(50,"th")(51,"pre"),e._uU(52,"Req. ID"),e.qZA()(),e.TgZ(53,"th")(54,"pre"),e._uU(55,"User ID"),e.qZA()(),e.TgZ(56,"th")(57,"pre"),e._uU(58,"Username"),e.qZA()(),e.TgZ(59,"th")(60,"pre"),e._uU(61,"Pick up Time"),e.qZA()(),e.TgZ(62,"th")(63,"pre"),e._uU(64,"Pick up Address"),e.qZA()(),e.TgZ(65,"th")(66,"pre"),e._uU(67,"Drop off Address"),e.qZA()(),e.TgZ(68,"th")(69,"pre"),e._uU(70,"Service Type"),e.qZA()(),e.TgZ(71,"th")(72,"pre"),e._uU(73,"Status"),e.qZA()(),e.TgZ(74,"th")(75,"pre"),e._uU(76,"Assign"),e.qZA()(),e.TgZ(77,"th")(78,"pre"),e._uU(79,"Action"),e.qZA()()()(),e.TgZ(80,"tbody"),e.YNc(81,B,42,19,"tr",26),e.ALo(82,"paginate"),e.qZA()()()()(),e.TgZ(83,"div",27)(84,"pagination-controls",28),e.NdJ("pageChange",function(o){return t.onPageChange(o)}),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngModel",t.statusfilter),e.xp6(3),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(2),e.Q6J("ngModel",t.vehiclefilter),e.xp6(3),e.Q6J("ngForOf",t.filteredVehicles),e.xp6(1),e.Q6J("ngModel",t.searchText),e.xp6(1),e.Q6J("ngModel",t.searchDate),e.xp6(4),e.Q6J("ngModel",t.limit),e.xp6(13),e.Q6J("ngModel",t.sortOrder),e.xp6(48),e.Q6J("ngForOf",e.xi3(82,13,t.ridesArray,e.kEZ(16,G,t.limit,t.currentPage,t.count))),e.xp6(3),e.Q6J("maxSize",5)("responsive",!0))},dependencies:[g.mk,g.sg,g.O5,g.RF,g.n9,g.ED,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,f.LS,A.Hw,_.VK,_.OP,_.p6,u.lW,f._s],styles:[".parentFormContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}#tableContainer[_ngcontent-%COMP%]{background-color:#00000036;border-radius:10px;box-shadow:2px 2px 2px #000;width:90%;padding:20px;margin:40px}pre[_ngcontent-%COMP%]{font-size:13px;font-weight:900;color:#000}.statusbadge[_ngcontent-%COMP%]{font-size:14px;padding:5px;border-radius:3px;font-weight:900}.badge-success[_ngcontent-%COMP%]{background-color:#49b600;color:#fff}.badge-info[_ngcontent-%COMP%]{background-color:#c200b8;color:#fff}.badge-warning[_ngcontent-%COMP%]{background-color:#e46600;color:#fff}.badge-danger[_ngcontent-%COMP%]{background-color:#e42200;color:#fff}.badge-light[_ngcontent-%COMP%]{background-color:#fff;color:#000}.infobadge[_ngcontent-%COMP%]{box-shadow:inset 2px 2px 4px 2px #6d62fa;border:none;font-size:16px;color:#000;font-weight:700}.btn[_ngcontent-%COMP%]:hover{box-shadow:inset 4px 4px 4px 2px #6d62fa;background:#ffffff;color:#000}.fixed-width[_ngcontent-%COMP%]{width:100px}.container[_ngcontent-%COMP%]{margin:0 auto;padding:20px}.filter-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}#filter-dropdown[_ngcontent-%COMP%], #pageSize[_ngcontent-%COMP%]{padding:5px}#search-input[_ngcontent-%COMP%]{flex-grow:1;padding:5px}#search-button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#2196f3;color:#fff;border:none;cursor:pointer}#searchbtn[_ngcontent-%COMP%]{padding:6px;background-color:#7200c4;color:#fff;border:none;cursor:pointer;border-radius:3px}#filterbtn[_ngcontent-%COMP%]{padding:6px;background-color:#06c300;color:#fff;border:none;cursor:pointer;border-radius:3px}#clearbtn[_ngcontent-%COMP%]{padding:6px;background-color:#bf0000;color:#fff;border:none;cursor:pointer;border-radius:3px}"]}),r})();var ee=d(1896);const te=[{path:"",component:X,pathMatch:"full"}];let ie=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,ee.Bz.forChild(te),l.u5,l.UX,f.JX,A.Ps,_.Tx,u.ot]}),r})()}}]);